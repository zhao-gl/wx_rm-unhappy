# 消除不开心 - 微信小游戏

一个基于微信小游戏平台开发的三消类游戏，玩家需要通过交换相邻的表情方块，使三个或更多相同的表情连成一线来消除它们并获得分数。

## 游戏特点

- 🎮 **经典三消玩法**：简单直观的游戏机制，适合所有年龄段的玩家
- 😊 **丰富表情元素**：使用多种表情符号作为游戏元素，增加趣味性
- 📈 **关卡进度系统**：随着关卡提升，目标分数增加，步数限制减少，难度逐渐提高
- 🎯 **连击系统**：连续消除可获得额外分数加成
- 💡 **提示功能**：每局游戏提供有限次数的提示，帮助玩家找到可能的消除组合
- 🔄 **自动重排**：当没有可消除的组合时，自动重新排列游戏方块

## 技术架构

### 核心模块

- **游戏主循环** (`js/main.js`): 负责游戏初始化、状态管理和主循环控制
- **数据总线** (`js/databus.js`): 全局状态管理，包括分数、步数、关卡等数据
- **游戏网格** (`js/matchthree/grid.js`): 游戏核心逻辑，处理方块交换、匹配检测和消除
- **游戏方块** (`js/matchthree/piece.js`): 方块对象，包含位置、类型和动画状态
- **渲染系统** (`js/render.js`): 处理Canvas渲染和设备适配
- **UI界面** (`js/runtime/`): 包含主菜单、游戏信息显示等UI组件

### 资源管理

- **分包加载**：游戏资源使用分包加载机制，优化首次加载速度
- **对象池**：使用对象池技术管理游戏对象，提高性能
- **图片资源**：包含多种表情图片作为游戏元素

## 游戏玩法

1. **基本操作**：点击并拖动方块与相邻方块交换位置
2. **消除规则**：三个或更多相同表情连成一线即可消除
3. **游戏目标**：在限定步数内达到目标分数
4. **得分机制**：
   - 基础分数：根据消除的方块数量计算
   - 连击加成：连续消除可获得额外分数倍数
5. **关卡进度**：完成当前关卡后自动进入下一关，难度逐渐提升

### 项目结构

```
wx_rm-unhappy/
├── game.js                 # 游戏入口文件
├── game.json               # 游戏配置文件
├── js/                     # JavaScript源代码
│   ├── base/               # 基础类库
│   │   ├── animation.js    # 动画类
│   │   ├── pool.js         # 对象池
│   │   └── sprite.js       # 精灵类
│   ├── libs/               # 第三方库
│   │   └── tinyemitter.js  # 事件发射器
│   ├── matchthree/         # 三消游戏核心逻辑
│   │   ├── grid.js         # 游戏网格
│   │   └── piece.js        # 游戏方块
│   ├── runtime/            # 运行时组件
│   │   ├── gameinfo.js     # 游戏信息显示
│   │   └── mainmenu.js     # 主菜单
│   ├── databus.js          # 数据总线
│   ├── main.js             # 游戏主逻辑
│   └── render.js           # 渲染系统
├── resources/              # 游戏资源
│   ├── audio/              # 音频文件
│   └── images/             # 图片资源
└── project.config.json     # 项目配置文件
```

### 性能优化

- 使用对象池技术减少内存分配
- 实现高效的网格匹配算法
- 优化渲染流程，减少不必要的重绘
- 使用分包加载机制优化初始加载速度

## 版权信息

本项目仅供学习和研究使用。

## 更新日志

### v1.0.0
- 初始版本发布
- 实现基本的三消游戏玩法
- 添加关卡系统和进度保存
- 实现提示功能和自动重排机制